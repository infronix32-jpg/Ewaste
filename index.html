<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EcoReclaim ‚Äî E-Waste Management</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,300&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
:root {
  --g-dark: #0f2212; --g-mid: #2e7d32; --g-bright: #4caf50; --g-light: #a5d6a7;
  --cream: #f7f4ed; --white: #ffffff; --text: #1a1a1a; --muted: #6b7280;
  --border: #e4e1d9; --blue: #1565c0; --orange: #e65100;
}
html { scroll-behavior: smooth; }
body { font-family: 'DM Sans', sans-serif; background: var(--cream); color: var(--text); overflow-x: hidden; }

/* PAGE SYSTEM */
.page { display: none; min-height: 100vh; }
.page.active { display: block; }
#pg-admin.active, #pg-routes.active { display: flex; }

/* SHARED */
.btn-primary { display: inline-block; background: var(--g-mid); color: #fff; padding: 12px 26px; border-radius: 8px; border: none; cursor: pointer; font-family: 'DM Sans', sans-serif; font-size: .92rem; font-weight: 500; text-decoration: none; transition: background .2s, transform .15s; }
.btn-primary:hover { background: var(--g-dark); transform: translateY(-1px); }
.btn-ghost { display: inline-block; background: transparent; color: rgba(255,255,255,.8); padding: 12px 26px; border-radius: 8px; border: 1.5px solid rgba(255,255,255,.25); cursor: pointer; font-family: 'DM Sans', sans-serif; font-size: .92rem; text-decoration: none; transition: border-color .2s, color .2s; }
.btn-ghost:hover { border-color: rgba(255,255,255,.6); color: #fff; }
.section-eyebrow { display: inline-block; font-size: .72rem; font-weight: 500; letter-spacing: 2px; text-transform: uppercase; color: var(--g-mid); background: rgba(46,125,50,.08); border: 1px solid rgba(46,125,50,.2); padding: 4px 14px; border-radius: 100px; margin-bottom: 12px; }
.section-title { font-family: 'Syne', sans-serif; font-size: clamp(1.8rem,3vw,2.6rem); font-weight: 800; letter-spacing: -.5px; line-height: 1.15; margin-bottom: 16px; }
.badge { display: inline-block; padding: 3px 12px; border-radius: 100px; font-size: .74rem; font-weight: 500; }
.badge.pending   { background: #fff3e0; color: var(--orange); border: 1px solid #ffcc80; }
.badge.collected { background: #e3f2fd; color: var(--blue); border: 1px solid #90caf9; }
.badge.recycled  { background: #e8f5e9; color: var(--g-mid); border: 1px solid var(--g-light); }
.payout-pill { display: inline-block; background: #e8f5e9; color: var(--g-mid); border: 1px solid var(--g-light); border-radius: 100px; padding: 2px 10px; font-size: .78rem; font-weight: 600; }

/* TOP NAV */
.pub-nav { position: fixed; top: 0; left: 0; right: 0; z-index: 200; height: 62px; background: rgba(15,34,18,.97); backdrop-filter: blur(10px); display: flex; align-items: center; justify-content: space-between; padding: 0 48px; border-bottom: 1px solid rgba(255,255,255,.07); }
.nav-logo { font-family: 'Syne', sans-serif; font-weight: 800; font-size: 1.2rem; color: #fff; cursor: pointer; }
.nav-logo em { font-style: normal; color: var(--g-light); }
.nav-links { display: flex; gap: 28px; align-items: center; }
.nav-links a { color: rgba(255,255,255,.65); text-decoration: none; font-size: .87rem; font-weight: 400; transition: color .2s; cursor: pointer; }
.nav-links a:hover { color: var(--g-light); }
.nav-cta { background: var(--g-bright); color: #fff !important; padding: 7px 18px; border-radius: 7px; font-weight: 500 !important; }
.nav-cta:hover { background: #43a047 !important; }

/* HERO */
.hero { min-height: 100vh; display: grid; grid-template-columns: 1fr 1fr; align-items: center; padding: 100px 64px 60px; gap: 60px; background: var(--g-dark); position: relative; overflow: hidden; }
.hero::before { content: ''; position: absolute; width: 700px; height: 700px; background: radial-gradient(circle,rgba(76,175,80,.12) 0%,transparent 65%); right: -120px; top: 50%; transform: translateY(-50%); pointer-events: none; }
.hero-eyebrow { display: inline-block; font-size: .72rem; font-weight: 500; letter-spacing: 2px; text-transform: uppercase; color: var(--g-light); background: rgba(165,214,167,.1); border: 1px solid rgba(165,214,167,.22); padding: 5px 14px; border-radius: 100px; margin-bottom: 22px; animation: fadeUp .6s ease both; }
.hero h1 { font-family: 'Syne', sans-serif; font-size: clamp(2.4rem,4vw,3.8rem); font-weight: 800; color: #fff; line-height: 1.08; letter-spacing: -1.5px; margin-bottom: 20px; animation: fadeUp .6s .1s ease both; }
.hero h1 em { font-style: normal; color: var(--g-light); }
.hero-p { font-size: 1.02rem; line-height: 1.72; color: rgba(255,255,255,.58); max-width: 420px; margin-bottom: 36px; animation: fadeUp .6s .2s ease both; }
.hero-btns { display: flex; gap: 12px; animation: fadeUp .6s .3s ease both; }
.hero-stats { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; animation: fadeUp .6s .4s ease both; }
.stat-card { background: rgba(255,255,255,.05); border: 1px solid rgba(255,255,255,.09); border-radius: 12px; padding: 22px 18px; text-align: center; }
.stat-card.big { grid-column: 1/-1; background: rgba(76,175,80,.13); border-color: rgba(76,175,80,.28); }
.stat-num { font-family: 'Syne', sans-serif; font-size: 2.1rem; font-weight: 800; color: #fff; }
.stat-card.big .stat-num { font-size: 2.8rem; color: var(--g-light); }
.stat-lbl { font-size: .78rem; color: rgba(255,255,255,.42); margin-top: 4px; }

/* ABOUT */
.about-sec { background: var(--cream); padding: 100px 64px; }
.about-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 64px; align-items: center; }
.about-text p { font-size: .97rem; line-height: 1.78; color: var(--muted); margin-bottom: 16px; }
.about-items { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }
.about-item { background: var(--white); border-radius: 12px; padding: 20px; border: 1px solid var(--border); }
.about-item:hover { box-shadow: 0 4px 18px rgba(0,0,0,.07); }
.ai-icon { font-size: 1.8rem; margin-bottom: 8px; }
.about-item h4 { font-family: 'Syne', sans-serif; font-size: .9rem; font-weight: 700; margin-bottom: 5px; }
.about-item p { font-size: .8rem; color: var(--muted); margin: 0; line-height: 1.5; }

/* PRICING PREVIEW */
.pricing-preview { background: var(--white); padding: 80px 64px; }
.pricing-preview .section-eyebrow, .pricing-preview .section-title { display: block; text-align: center; }
.pricing-cards { display: grid; grid-template-columns: repeat(auto-fill,minmax(160px,1fr)); gap: 14px; max-width: 860px; margin: 36px auto 0; }
.price-card { background: var(--cream); border: 1.5px solid var(--border); border-radius: 12px; padding: 18px 14px; text-align: center; transition: transform .2s, box-shadow .2s; }
.price-card:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(0,0,0,.08); }
.pc-emoji { font-size: 2rem; margin-bottom: 8px; }
.pc-name { font-family: 'Syne', sans-serif; font-size: .85rem; font-weight: 700; margin-bottom: 5px; }
.pc-rate { font-size: .78rem; color: var(--g-mid); font-weight: 600; background: #e8f5e9; padding: 2px 10px; border-radius: 100px; display: inline-block; }

/* FORM SECTION */
.form-sec { background: var(--cream); padding: 100px 64px; }
.form-wrap { max-width: 660px; margin: 0 auto; text-align: center; }
.form-wrap .section-title { margin-bottom: 36px; }
.pickup-form { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; text-align: left; }
.fg { display: flex; flex-direction: column; }
.fg.full { grid-column: 1/-1; }
.fg label { font-size: .78rem; font-weight: 500; letter-spacing: .3px; color: var(--text); margin-bottom: 5px; }
.fg input, .fg select, .fg textarea { padding: 11px 14px; border: 1.5px solid var(--border); border-radius: 8px; font-family: 'DM Sans', sans-serif; font-size: .88rem; color: var(--text); background: var(--white); outline: none; transition: border-color .2s; }
.fg input:focus, .fg select:focus, .fg textarea:focus { border-color: var(--g-bright); }
.fg textarea { resize: vertical; min-height: 82px; }
.fg input[readonly] { background: #e8f5e9; color: var(--g-mid); font-weight: 600; cursor: default; }
.form-submit { grid-column: 1/-1; text-align: center; }
.form-submit button { background: var(--g-mid); color: #fff; padding: 13px 40px; border: none; border-radius: 8px; font-family: 'DM Sans', sans-serif; font-size: .93rem; font-weight: 500; cursor: pointer; transition: background .2s, transform .15s; }
.form-submit button:hover { background: var(--g-dark); transform: translateY(-1px); }
.success-toast { display: none; margin-top: 14px; background: #e8f5e9; border: 1px solid var(--g-light); color: var(--g-mid); border-radius: 8px; padding: 11px 18px; font-size: .88rem; font-weight: 500; }
.payout-estimate { grid-column: 1/-1; background: linear-gradient(135deg,#e8f5e9,#f1f8e9); border: 1.5px solid var(--g-light); border-radius: 10px; padding: 14px 18px; display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 8px; }
.pe-label { font-size: .82rem; color: var(--g-mid); font-weight: 500; }
.pe-amount { font-family: 'Syne', sans-serif; font-size: 1.6rem; font-weight: 800; color: var(--g-mid); }
.pe-note { font-size: .73rem; color: var(--muted); width: 100%; }

/* CONTACT */
.contact-sec { background: var(--g-dark); padding: 80px 64px; text-align: center; }
.contact-sec .section-eyebrow { color: var(--g-light); background: rgba(165,214,167,.1); border-color: rgba(165,214,167,.22); }
.contact-sec .section-title { color: #fff; margin-bottom: 10px; }
.contact-sec > p { color: rgba(255,255,255,.5); margin-bottom: 32px; }
.contact-cards { display: flex; justify-content: center; gap: 18px; flex-wrap: wrap; }
.contact-card { background: rgba(255,255,255,.05); border: 1px solid rgba(255,255,255,.09); border-radius: 12px; padding: 22px 30px; min-width: 170px; text-align: center; }
.cc-icon { font-size: 1.4rem; margin-bottom: 8px; }
.cc-lbl { font-size: .7rem; color: rgba(255,255,255,.35); letter-spacing: 1px; text-transform: uppercase; margin-bottom: 5px; }
.cc-val { font-size: .9rem; color: #fff; font-weight: 500; }
footer { background: #070f08; color: rgba(255,255,255,.25); text-align: center; padding: 18px; font-size: .8rem; }
footer a { color: var(--g-light); text-decoration: none; cursor: pointer; }

/* ITEMS PAGE */
#pg-items { background: linear-gradient(160deg,#0f2212 0%,#2e7d32 55%,#0f2212 100%); }
.items-header { text-align: center; padding: 100px 20px 36px; color: #fff; }
.items-header .section-eyebrow { color: var(--g-light); background: rgba(165,214,167,.1); border-color: rgba(165,214,167,.22); }
.items-header h1 { font-family: 'Syne', sans-serif; font-size: clamp(1.9rem,3.5vw,2.8rem); font-weight: 800; letter-spacing: -.5px; }
.items-header p { color: rgba(255,255,255,.55); margin-top: 8px; font-size: .93rem; }
.items-container { max-width: 860px; margin: 0 auto; padding: 0 20px 60px; }
.pricing-note { background: rgba(255,255,255,.07); border: 1px solid rgba(255,255,255,.1); border-radius: 10px; padding: 12px 18px; text-align: center; font-size: .8rem; color: rgba(255,255,255,.45); margin-bottom: 24px; }
.items-grid { display: grid; grid-template-columns: repeat(auto-fill,minmax(175px,1fr)); gap: 14px; margin-bottom: 28px; }
.item-card { background: var(--white); border-radius: 14px; padding: 22px 16px; text-align: center; cursor: pointer; border: 2.5px solid transparent; transition: transform .2s, border-color .2s, box-shadow .2s; position: relative; }
.item-card:hover { transform: translateY(-4px); box-shadow: 0 14px 32px rgba(0,0,0,.18); }
.item-card.selected { border-color: var(--g-bright); background: #f0fbf0; }
.item-card.selected::after { content: '‚úì'; position: absolute; top: 8px; right: 10px; background: var(--g-bright); color: #fff; width: 20px; height: 20px; border-radius: 50%; font-size: .7rem; display: flex; align-items: center; justify-content: center; }
.item-emoji { font-size: 2.5rem; margin-bottom: 10px; }
.item-name { font-family: 'Syne', sans-serif; font-size: .88rem; font-weight: 700; margin-bottom: 4px; }
.item-rate { font-size: .76rem; color: var(--g-mid); font-weight: 500; }
.calc-card { background: var(--white); border-radius: 16px; padding: 28px 32px; box-shadow: 0 24px 60px rgba(0,0,0,.25); }
.calc-card h3 { font-family: 'Syne', sans-serif; font-size: 1.05rem; font-weight: 700; margin-bottom: 18px; }
.selected-display { background: var(--cream); border-radius: 10px; padding: 13px 16px; margin-bottom: 18px; border-left: 3px solid var(--g-bright); font-size: .86rem; }
.selected-display .sdl { color: var(--muted); font-size: .73rem; text-transform: uppercase; letter-spacing: .5px; }
.selected-display .sdv { font-family: 'Syne', sans-serif; font-weight: 700; font-size: 1rem; margin-top: 3px; }
.input-row { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; margin-bottom: 18px; }
.payout-box { background: linear-gradient(135deg,#e8f5e9,#f1f8e9); border: 1.5px solid var(--g-light); border-radius: 10px; padding: 16px 18px; margin-bottom: 18px; text-align: center; }
.pb-label { font-size: .76rem; color: var(--muted); text-transform: uppercase; letter-spacing: .5px; margin-bottom: 4px; }
.pb-amount { font-family: 'Syne', sans-serif; font-size: 2rem; font-weight: 800; color: var(--g-mid); }
.pb-note { font-size: .74rem; color: var(--muted); margin-top: 4px; }

/* ADMIN LOGIN */
#pg-login { min-height: 100vh; background: #0f2212; display: flex; align-items: center; justify-content: center; padding: 20px; position: relative; overflow: hidden; }
#pg-login::before { content: ''; position: absolute; width: 500px; height: 500px; background: radial-gradient(circle,rgba(46,125,50,.22) 0%,transparent 65%); top: -120px; right: -80px; pointer-events: none; }
#pg-login::after  { content: ''; position: absolute; width: 380px; height: 380px; background: radial-gradient(circle,rgba(76,175,80,.1) 0%,transparent 65%); bottom: -80px; left: -60px; pointer-events: none; }
.login-card { position: relative; z-index: 2; background: rgba(255,255,255,.04); border: 1px solid rgba(255,255,255,.1); border-radius: 20px; padding: 46px 38px; width: 100%; max-width: 370px; backdrop-filter: blur(20px); animation: fadeUp .5s ease both; }
.login-brand { text-align: center; margin-bottom: 30px; }
.login-brand .logo-box { display: inline-flex; align-items: center; justify-content: center; width: 52px; height: 52px; background: rgba(76,175,80,.2); border: 1px solid rgba(76,175,80,.3); border-radius: 12px; font-size: 1.5rem; margin-bottom: 12px; }
.login-brand h2 { font-family: 'Syne', sans-serif; font-size: 1.35rem; font-weight: 800; color: #fff; letter-spacing: -.5px; }
.login-brand p { font-size: .8rem; color: rgba(255,255,255,.35); margin-top: 3px; }
.lf-group { margin-bottom: 14px; }
.lf-group label { display: block; font-size: .75rem; font-weight: 500; color: rgba(255,255,255,.45); letter-spacing: .5px; text-transform: uppercase; margin-bottom: 6px; }
.lf-group input { width: 100%; padding: 12px 15px; background: rgba(255,255,255,.06); border: 1.5px solid rgba(255,255,255,.1); border-radius: 10px; font-family: 'DM Sans', sans-serif; font-size: .93rem; color: #fff; outline: none; transition: border-color .2s; }
.lf-group input::placeholder { color: rgba(255,255,255,.22); }
.lf-group input:focus { border-color: rgba(76,175,80,.6); background: rgba(76,175,80,.06); }
.login-btn { width: 100%; padding: 13px; background: var(--g-mid); color: #fff; border: none; border-radius: 10px; font-family: 'DM Sans', sans-serif; font-size: .93rem; font-weight: 500; cursor: pointer; margin-top: 6px; transition: background .2s; }
.login-btn:hover { background: var(--g-dark); }
.login-error { display: none; background: rgba(239,83,80,.12); border: 1px solid rgba(239,83,80,.3); color: #ef9a9a; border-radius: 8px; padding: 10px 14px; font-size: .83rem; margin-top: 12px; text-align: center; }
.login-demo { margin-top: 22px; border-top: 1px solid rgba(255,255,255,.07); padding-top: 18px; text-align: center; font-size: .78rem; color: rgba(255,255,255,.22); }
.login-demo span { color: rgba(165,214,167,.7); font-weight: 500; }
.back-to-site { display: block; text-align: center; margin-top: 14px; font-size: .8rem; color: rgba(255,255,255,.28); cursor: pointer; transition: color .2s; }
.back-to-site:hover { color: rgba(165,214,167,.6); }

/* SIDEBAR */
.sidebar { width: 230px; background: var(--g-dark); display: flex; flex-direction: column; padding: 26px 18px; flex-shrink: 0; position: sticky; top: 0; height: 100vh; overflow-y: auto; }
.sb-logo { font-family: 'Syne', sans-serif; font-size: 1.1rem; font-weight: 800; color: #fff; display: flex; align-items: center; gap: 10px; margin-bottom: 36px; padding-bottom: 22px; border-bottom: 1px solid rgba(255,255,255,.07); }
.sb-logo .sb-icon { width: 34px; height: 34px; background: rgba(76,175,80,.22); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: .95rem; }
.sb-logo span { color: var(--g-light); }
.sb-nav { flex: 1; }
.sb-lbl { font-size: .65rem; font-weight: 500; letter-spacing: 1.5px; text-transform: uppercase; color: rgba(255,255,255,.22); margin-bottom: 8px; padding: 0 10px; }
.sb-link { display: flex; align-items: center; gap: 10px; padding: 10px 12px; border-radius: 8px; color: rgba(255,255,255,.55); text-decoration: none; font-size: .86rem; margin-bottom: 3px; cursor: pointer; transition: background .2s, color .2s; }
.sb-link:hover, .sb-link.active { background: rgba(76,175,80,.15); color: #fff; }
.sb-link .si { font-size: .95rem; width: 18px; }
.sb-footer { border-top: 1px solid rgba(255,255,255,.07); padding-top: 18px; }
.logout-btn { width: 100%; display: flex; align-items: center; gap: 10px; padding: 10px 12px; background: rgba(239,83,80,.1); border: 1px solid rgba(239,83,80,.2); border-radius: 8px; color: #ef9a9a; font-family: 'DM Sans', sans-serif; font-size: .86rem; cursor: pointer; transition: background .2s; }
.logout-btn:hover { background: rgba(239,83,80,.2); }

/* ADMIN DASHBOARD */
.admin-main { flex: 1; padding: 30px; background: #f0f2f0; overflow-y: auto; }
.admin-topbar { display: flex; align-items: center; justify-content: space-between; margin-bottom: 26px; }
.admin-topbar h1 { font-family: 'Syne', sans-serif; font-size: 1.5rem; font-weight: 700; letter-spacing: -.5px; }
.admin-topbar p { font-size: .83rem; color: var(--muted); margin-top: 3px; }
.admin-badge { background: rgba(46,125,50,.1); border: 1px solid rgba(46,125,50,.22); color: var(--g-mid); font-size: .75rem; font-weight: 500; padding: 5px 12px; border-radius: 100px; }
.stat-grid { display: grid; grid-template-columns: repeat(5,1fr); gap: 14px; margin-bottom: 24px; }
.sc { background: var(--white); border-radius: 12px; padding: 18px; border: 1px solid #e8e8e8; }
.sc .sc-lbl { font-size: .72rem; font-weight: 500; color: var(--muted); text-transform: uppercase; letter-spacing: .3px; margin-bottom: 7px; }
.sc .sc-icon { font-size: 1.1rem; margin-bottom: 5px; }
.sc .sc-num { font-family: 'Syne', sans-serif; font-size: 1.7rem; font-weight: 700; line-height: 1; }
.sc.total .sc-num     { color: var(--text); }
.sc.pending .sc-num   { color: var(--orange); }
.sc.collected .sc-num { color: var(--blue); }
.sc.recycled .sc-num  { color: var(--g-mid); }
.sc.payout .sc-num    { color: #6a1b9a; font-size: 1.3rem; }
.tbl-section { background: var(--white); border-radius: 14px; border: 1px solid #e8e8e8; overflow: hidden; }
.tbl-head { display: flex; align-items: center; justify-content: space-between; padding: 18px 22px; border-bottom: 1px solid #f0f0f0; }
.tbl-head h2 { font-family: 'Syne', sans-serif; font-size: .98rem; font-weight: 700; }
.tbl-head p { font-size: .8rem; color: var(--muted); margin-top: 2px; }
.add-btn { background: var(--g-mid); color: #fff; border: none; border-radius: 8px; padding: 8px 16px; font-family: 'DM Sans', sans-serif; font-size: .82rem; font-weight: 500; cursor: pointer; transition: background .2s; }
.add-btn:hover { background: var(--g-dark); }
.tbl-wrap { overflow-x: auto; }
table { width: 100%; border-collapse: collapse; }
thead tr { background: #fafafa; border-bottom: 1px solid #f0f0f0; }
th { padding: 11px 14px; text-align: left; font-size: .72rem; font-weight: 500; color: var(--muted); letter-spacing: .5px; text-transform: uppercase; }
td { padding: 12px 14px; font-size: .85rem; border-bottom: 1px solid #f5f5f5; vertical-align: middle; }
tr:last-child td { border-bottom: none; }
tr:hover td { background: #fafffd; }
.name-cell { font-weight: 500; }
.name-cell small { display: block; color: var(--muted); font-size: .75rem; font-weight: 400; }
.act-group { display: flex; gap: 5px; flex-wrap: wrap; }
.act-btn { padding: 4px 10px; border-radius: 6px; font-family: 'DM Sans', sans-serif; font-size: .74rem; font-weight: 500; cursor: pointer; border: 1px solid; transition: opacity .2s; }
.act-btn:hover { opacity: .75; }
.ab-collect { background: #e3f2fd; color: var(--blue); border-color: #90caf9; }
.ab-recycle  { background: #e8f5e9; color: var(--g-mid); border-color: var(--g-light); }
.ab-route    { background: #f3e5f5; color: #6a1b9a; border-color: #ce93d8; }
.ab-delete   { background: #fde8e8; color: #b71c1c; border-color: #ef9a9a; }
.ab-pay      { background: #fff9c4; color: #f57f17; border-color: #ffe082; }

/* ROUTES PAGE */
.routes-main { flex: 1; padding: 30px; background: #f0f2f0; overflow-y: auto; }
.summary-bar { display: flex; gap: 14px; background: var(--white); border-radius: 12px; border: 1px solid #e8e8e8; padding: 14px 22px; margin-bottom: 22px; }
.sum-item { display: flex; align-items: center; gap: 10px; flex: 1; }
.sum-item:not(:last-child) { border-right: 1px solid #f0f0f0; padding-right: 14px; }
.sum-icon { font-size: 1.2rem; }
.sum-lbl { font-size: .7rem; color: var(--muted); text-transform: uppercase; letter-spacing: .5px; }
.sum-val { font-family: 'Syne', sans-serif; font-size: 1.2rem; font-weight: 700; }
.sum-val.green { color: var(--g-mid); }
.routes-grid { display: grid; grid-template-columns: repeat(auto-fill,minmax(330px,1fr)); gap: 18px; }
.route-card { background: var(--white); border-radius: 14px; border: 1px solid #e8e8e8; overflow: hidden; transition: box-shadow .2s; }
.route-card:hover { box-shadow: 0 8px 24px rgba(0,0,0,.08); }
.rc-head { padding: 16px 18px; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid #f0f0f0; }
.rc-title { display: flex; align-items: center; gap: 10px; }
.avatar { width: 38px; height: 38px; border-radius: 50%; background: linear-gradient(135deg,#2e7d32,#66bb6a); display: flex; align-items: center; justify-content: center; color: #fff; font-family: 'Syne', sans-serif; font-weight: 700; font-size: .9rem; }
.rc-title h3 { font-family: 'Syne', sans-serif; font-size: .93rem; font-weight: 700; }
.rc-title p { font-size: .76rem; color: var(--muted); margin-top: 2px; }
.status-dot { width: 9px; height: 9px; border-radius: 50%; background: #ff9800; box-shadow: 0 0 0 3px rgba(255,152,0,.15); }
.status-dot.collected { background: #2196f3; box-shadow: 0 0 0 3px rgba(33,150,243,.15); }
.status-dot.recycled  { background: var(--g-bright); box-shadow: 0 0 0 3px rgba(76,175,80,.15); }
.rc-body { padding: 14px 18px; }
.detail-row { display: flex; align-items: flex-start; gap: 9px; margin-bottom: 10px; font-size: .83rem; }
.detail-row:last-child { margin: 0; }
.di { font-size: .9rem; margin-top: 1px; flex-shrink: 0; }
.dl { color: var(--muted); font-size: .72rem; display: block; margin-bottom: 1px; }
.rc-payout-box { background: linear-gradient(135deg,#e8f5e9,#f1f8e9); border: 1px solid var(--g-light); border-radius: 10px; padding: 12px 16px; margin: 0 18px 12px; display: flex; align-items: center; justify-content: space-between; }
.rpb-label { font-size: .75rem; color: var(--muted); }
.rpb-amount { font-family: 'Syne', sans-serif; font-size: 1.3rem; font-weight: 800; color: var(--g-mid); }
.rpb-sub { font-size: .72rem; color: var(--muted); }
.map-placeholder { margin: 0 18px 12px; border-radius: 10px; overflow: hidden; border: 1px solid var(--border); background: linear-gradient(135deg,#e8f5e9,#c8e6c9); height: 150px; display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: pointer; gap: 6px; transition: background .2s; }
.map-placeholder:hover { background: linear-gradient(135deg,#c8e6c9,#a5d6a7); }
.mp-icon { font-size: 2rem; }
.mp-text { font-size: .82rem; color: var(--g-mid); font-weight: 600; }
.mp-addr { font-size: .72rem; color: var(--muted); text-align: center; padding: 0 12px; }
.rc-foot { padding: 12px 18px; background: #fafafa; border-top: 1px solid #f0f0f0; display: flex; gap: 7px; }
.rc-btn { flex: 1; padding: 9px; border: none; border-radius: 7px; font-family: 'DM Sans', sans-serif; font-size: .78rem; font-weight: 500; cursor: pointer; transition: opacity .2s, transform .15s; }
.rc-btn:hover { opacity: .82; transform: translateY(-1px); }
.rcb-maps { background: var(--g-mid); color: #fff; }
.rcb-pay  { background: #fff9c4; color: #f57f17; border: 1px solid #ffe082; }
.rcb-done { background: #e8f5e9; color: var(--g-mid); border: 1px solid var(--g-light); }

/* MODALS */
.modal-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,.5); z-index: 500; align-items: center; justify-content: center; }
.modal-overlay.open { display: flex; }
.modal { background: var(--white); border-radius: 16px; padding: 30px; width: 90%; max-width: 500px; position: relative; animation: fadeUp .3s ease both; max-height: 90vh; overflow-y: auto; }
.modal h3 { font-family: 'Syne', sans-serif; font-size: 1.15rem; font-weight: 700; margin-bottom: 18px; }
.mfg { margin-bottom: 13px; }
.mfg label { display: block; font-size: .77rem; font-weight: 500; color: var(--muted); margin-bottom: 5px; }
.mfg input, .mfg select { width: 100%; padding: 10px 12px; border: 1.5px solid var(--border); border-radius: 8px; font-family: 'DM Sans', sans-serif; font-size: .88rem; outline: none; transition: border-color .2s; }
.mfg input:focus, .mfg select:focus { border-color: var(--g-bright); }
.mfg input[readonly] { background: #e8f5e9; color: var(--g-mid); font-weight: 600; cursor: default; }
.m-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.modal-payout { background: linear-gradient(135deg,#e8f5e9,#f1f8e9); border: 1.5px solid var(--g-light); border-radius: 10px; padding: 14px 16px; margin: 4px 0 14px; text-align: center; }
.mp-lbl { font-size: .74rem; color: var(--muted); text-transform: uppercase; letter-spacing: .5px; margin-bottom: 4px; }
.mp-val { font-family: 'Syne', sans-serif; font-size: 1.6rem; font-weight: 800; color: var(--g-mid); }
.mp-sub { font-size: .72rem; color: var(--muted); margin-top: 3px; }
.modal-actions { display: flex; gap: 9px; margin-top: 18px; }
.m-save { background: var(--g-mid); color: #fff; border: none; border-radius: 8px; padding: 10px 22px; font-family: 'DM Sans', sans-serif; font-weight: 500; cursor: pointer; flex: 1; transition: background .2s; }
.m-save:hover { background: var(--g-dark); }
.m-cancel { background: #f5f5f5; color: var(--text); border: none; border-radius: 8px; padding: 10px 18px; font-family: 'DM Sans', sans-serif; cursor: pointer; }
.close-modal { position: absolute; top: 14px; right: 16px; background: none; border: none; font-size: 1.1rem; cursor: pointer; color: var(--muted); }
.pay-modal { max-width: 400px; }
.pay-header { text-align: center; margin-bottom: 20px; }
.pay-icon { font-size: 3rem; margin-bottom: 10px; }
.pay-breakdown { background: var(--cream); border-radius: 10px; padding: 16px; margin-bottom: 16px; }
.pay-row { display: flex; justify-content: space-between; font-size: .85rem; padding: 6px 0; border-bottom: 1px solid var(--border); }
.pay-row:last-child { border: none; padding-top: 10px; font-weight: 700; font-size: .95rem; }
.pay-row .lbl { color: var(--muted); }
.pay-row.total .val { color: var(--g-mid); font-family: 'Syne', sans-serif; font-size: 1.1rem; }
.pay-confirm-btn { width: 100%; padding: 13px; background: var(--g-mid); color: #fff; border: none; border-radius: 10px; font-family: 'DM Sans', sans-serif; font-size: .95rem; font-weight: 500; cursor: pointer; transition: background .2s; }
.pay-confirm-btn:hover { background: var(--g-dark); }
.pay-confirmed { display: none; text-align: center; padding: 20px; }
.pay-confirmed .big-check { font-size: 3rem; margin-bottom: 12px; }
.pay-confirmed h4 { font-family: 'Syne', sans-serif; font-size: 1.1rem; font-weight: 700; color: var(--g-mid); }
.pay-confirmed p { font-size: .83rem; color: var(--muted); margin-top: 6px; }

@keyframes fadeUp { from { opacity:0; transform:translateY(20px); } to { opacity:1; transform:translateY(0); } }

/* RESPONSIVE */
@media (max-width:900px) {
  .sidebar { width: 56px; padding: 18px 10px; }
  .sb-logo span, .sb-lbl, .sb-link span, .logout-btn span { display: none; }
  .admin-main, .routes-main { padding: 18px; }
  .stat-grid { grid-template-columns: 1fr 1fr; }
  .summary-bar { flex-wrap: wrap; }
  .sum-item:not(:last-child) { border: none; }
}
@media (max-width:768px) {
  .pub-nav { padding: 0 20px; }
  .nav-links a:not(.nav-cta) { display: none; }
  .hero { grid-template-columns: 1fr; padding: 90px 24px 50px; gap: 40px; }
  .about-sec, .pricing-preview, .form-sec, .contact-sec { padding: 60px 24px; }
  .about-grid { grid-template-columns: 1fr; gap: 36px; }
  .pickup-form { grid-template-columns: 1fr; }
  .fg.full, .form-submit, .payout-estimate { grid-column: 1; }
  .input-row, .m-grid { grid-template-columns: 1fr; }
}
</style>
</head>
<body>

<!-- ===== PAGE 1: PUBLIC HOME ===== -->
<div id="pg-home" class="page active">
  <nav class="pub-nav">
    <div class="nav-logo" onclick="showPage('pg-home')"><em>Eco</em>Reclaim</div>
    <div class="nav-links">
      <a onclick="sTo('home-hero')">Home</a>
      <a onclick="sTo('home-about')">About</a>
      <a onclick="sTo('home-pricing')">Rates</a>
      <a onclick="sTo('home-contact')">Contact</a>
      <a onclick="showPage('pg-login')" class="nav-cta">Admin Login</a>
    </div>
  </nav>

  <section class="hero" id="home-hero">
    <div>
      <div class="hero-eyebrow">‚ôª Certified E-Waste Management</div>
      <h1>Recycle Smarter.<br>Get <em>Paid.</em></h1>
      <p class="hero-p">Schedule a free doorstep pickup and earn money for your old electronics ‚Äî we pay you based on item type and weight. Fast, safe, and eco-friendly.</p>
      <div class="hero-btns">
        <a class="btn-primary" onclick="sTo('home-form')">Get Paid to Recycle</a>
        <a class="btn-ghost"   onclick="sTo('home-about')">Learn More</a>
      </div>
    </div>
    <div>
      <div class="hero-stats">
        <div class="stat-card big"><div class="stat-num">‚Çπ25L+</div><div class="stat-lbl">Paid out to customers this year</div></div>
        <div class="stat-card"><div class="stat-num">50K+</div><div class="stat-lbl">Devices recycled</div></div>
        <div class="stat-card"><div class="stat-num">98%</div><div class="stat-lbl">Recycling rate</div></div>
      </div>
    </div>
  </section>

  <section class="about-sec" id="home-about">
    <div class="about-grid">
      <div class="about-text">
        <div class="section-eyebrow">About E-Waste</div>
        <h2 class="section-title">Why Proper Disposal Matters</h2>
        <p>E-waste is the world's fastest-growing waste stream. Old phones, laptops, TVs and batteries contain toxic materials like lead and mercury that poison soil and water if landfilled.</p>
        <p>Recycling recovers valuable metals while preventing pollution. EcoReclaim makes it effortless ‚Äî we come to you, weigh your items, and pay you on the spot.</p>
      </div>
      <div class="about-items">
        <div class="about-item"><div class="ai-icon">üì±</div><h4>Mobile Phones</h4><p>Rare earth metals recovered. Earn up to ‚Çπ200/kg.</p></div>
        <div class="about-item"><div class="ai-icon">üíª</div><h4>Laptops & PCs</h4><p>Secure data wipe + ‚Çπ150/kg payout.</p></div>
        <div class="about-item"><div class="ai-icon">üîã</div><h4>Batteries</h4><p>Prevent toxic leaching. ‚Çπ80/kg paid.</p></div>
        <div class="about-item"><div class="ai-icon">üì∫</div><h4>Televisions</h4><p>CRT & LCD handled safely. ‚Çπ60/kg paid.</p></div>
      </div>
    </div>
  </section>

  <section class="pricing-preview" id="home-pricing">
    <div class="section-eyebrow">Our Rates</div>
    <h2 class="section-title">What We Pay You Per Kilogram</h2>
    <div class="pricing-cards">
      <div class="price-card"><div class="pc-emoji">üì±</div><div class="pc-name">Mobile Phone</div><div class="pc-rate">‚Çπ200 / kg</div></div>
      <div class="price-card"><div class="pc-emoji">üíª</div><div class="pc-name">Laptop / PC</div><div class="pc-rate">‚Çπ150 / kg</div></div>
      <div class="price-card"><div class="pc-emoji">üîã</div><div class="pc-name">Battery</div><div class="pc-rate">‚Çπ80 / kg</div></div>
      <div class="price-card"><div class="pc-emoji">üì∫</div><div class="pc-name">Television</div><div class="pc-rate">‚Çπ60 / kg</div></div>
      <div class="price-card"><div class="pc-emoji">üñ®Ô∏è</div><div class="pc-name">Printer</div><div class="pc-rate">‚Çπ70 / kg</div></div>
      <div class="price-card"><div class="pc-emoji">üîå</div><div class="pc-name">Other</div><div class="pc-rate">‚Çπ50 / kg</div></div>
    </div>
  </section>

  <section class="form-sec" id="home-form">
    <div class="form-wrap">
      <div class="section-eyebrow">Free Pickup ¬∑ Instant Payout Estimate</div>
      <h2 class="section-title">Submit Your E-Waste Request</h2>
      <form class="pickup-form" onsubmit="submitPickup(event)">
        <div class="fg"><label>Full Name *</label><input type="text" id="pName" placeholder="Your name" required></div>
        <div class="fg"><label>Email Address *</label><input type="email" id="pEmail" placeholder="you@email.com" required></div>
        <div class="fg"><label>Phone Number *</label><input type="tel" id="pPhone" placeholder="+91 98765 43210" required></div>
        <div class="fg"><label>UPI ID / Bank Account (for payout)</label><input type="text" id="pUPI" placeholder="yourname@upi or account no."></div>
        <div class="fg"><label>Type of E-Waste *</label>
          <select id="pCategory" required onchange="calcPublicPayout()">
            <option value="">Select Category</option>
            <option value="Mobile Phone">üì± Mobile Phone ‚Äî ‚Çπ200/kg</option>
            <option value="Laptop / PC">üíª Laptop / PC ‚Äî ‚Çπ150/kg</option>
            <option value="Battery">üîã Battery ‚Äî ‚Çπ80/kg</option>
            <option value="Television">üì∫ Television ‚Äî ‚Çπ60/kg</option>
            <option value="Printer / Scanner">üñ®Ô∏è Printer / Scanner ‚Äî ‚Çπ70/kg</option>
            <option value="Other">üîå Other ‚Äî ‚Çπ50/kg</option>
          </select>
        </div>
        <div class="fg"><label>Quantity (items)</label><input type="number" id="pQty" min="1" value="1"></div>
        <div class="fg"><label>Estimated Weight (kg) *</label><input type="number" id="pWeight" placeholder="e.g. 2.5" min="0.1" step="0.1" required oninput="calcPublicPayout()"></div>
        <div class="fg"><label>Preferred Pickup Date</label><input type="date" id="pickupDate"></div>
        <div class="fg full"><label>Pickup Address *</label><textarea id="pAddress" placeholder="House/flat no., street, area, city, PIN code" required></textarea></div>

        <div class="payout-estimate" id="payoutEstimate" style="display:none">
          <div>
            <div class="pe-label">üí∞ Your Estimated Payout</div>
            <div class="pe-note">Based on <span id="pe-formula">‚Äî</span> ¬∑ Paid in cash/UPI on collection</div>
          </div>
          <div class="pe-amount" id="publicPayoutAmt">‚Çπ 0</div>
        </div>

        <div class="form-submit">
          <button type="submit">Submit Pickup Request ‚Üí</button>
          <div class="success-toast" id="homeSuccess">‚úÖ Request submitted! Our collector will contact you within 24 hours. Payout is made on the spot during collection.</div>
        </div>
      </form>
    </div>
  </section>

  <section class="contact-sec" id="home-contact">
    <div class="section-eyebrow">Get In Touch</div>
    <h2 class="section-title">Contact Us</h2>
    <p>Have questions? Our support team is happy to help.</p>
    <div class="contact-cards">
      <div class="contact-card"><div class="cc-icon">üìß</div><div class="cc-lbl">Email</div><div class="cc-val">support@ecoreclaim.in</div></div>
      <div class="contact-card"><div class="cc-icon">üìû</div><div class="cc-lbl">Phone</div><div class="cc-val">+91 98765 43210</div></div>
      <div class="contact-card"><div class="cc-icon">üïê</div><div class="cc-lbl">Hours</div><div class="cc-val">Mon‚ÄìSat, 9AM‚Äì6PM</div></div>
      <div class="contact-card"><div class="cc-icon">üìç</div><div class="cc-lbl">Coverage</div><div class="cc-val">Pan India</div></div>
    </div>
  </section>
  <footer><p>¬© 2026 EcoReclaim E-Waste Management ¬∑ All Rights Reserved ¬∑ <a onclick="showPage('pg-login')">Admin Portal</a></p></footer>
</div>

<!-- ===== PAGE 2: ITEM CALCULATOR ===== -->
<div id="pg-items" class="page">
  <nav class="pub-nav">
    <div class="nav-logo" onclick="showPage('pg-home')"><em>Eco</em>Reclaim</div>
    <div class="nav-links">
      <a onclick="showPage('pg-home')">‚Üê Back</a>
      <a onclick="showPage('pg-login')" class="nav-cta">Admin Login</a>
    </div>
  </nav>
  <div style="padding-top:62px">
    <div class="items-header">
      <div class="section-eyebrow">‚ôª Payout Calculator</div>
      <h1>Calculate Your E-Waste Payout</h1>
      <p>Select item type, enter the weight and see your instant payout estimate.</p>
    </div>
    <div class="items-container">
      <div class="pricing-note">üí° All prices are per kilogram. Payment made in cash or UPI at time of collection.</div>
      <div class="items-grid">
        <div class="item-card" onclick="selectItem(this,'Mobile Phone',200)"><div class="item-emoji">üì±</div><div class="item-name">Mobile Phone</div><div class="item-rate">‚Çπ200 / kg</div></div>
        <div class="item-card" onclick="selectItem(this,'Laptop / PC',150)"><div class="item-emoji">üíª</div><div class="item-name">Laptop / PC</div><div class="item-rate">‚Çπ150 / kg</div></div>
        <div class="item-card" onclick="selectItem(this,'Battery',80)"><div class="item-emoji">üîã</div><div class="item-name">Battery</div><div class="item-rate">‚Çπ80 / kg</div></div>
        <div class="item-card" onclick="selectItem(this,'Television',60)"><div class="item-emoji">üì∫</div><div class="item-name">Television</div><div class="item-rate">‚Çπ60 / kg</div></div>
        <div class="item-card" onclick="selectItem(this,'Printer / Scanner',70)"><div class="item-emoji">üñ®Ô∏è</div><div class="item-name">Printer</div><div class="item-rate">‚Çπ70 / kg</div></div>
        <div class="item-card" onclick="selectItem(this,'Other',50)"><div class="item-emoji">üîå</div><div class="item-name">Other</div><div class="item-rate">‚Çπ50 / kg</div></div>
      </div>
      <div class="calc-card">
        <h3>üßÆ Instant Payout Calculator</h3>
        <div class="selected-display"><div class="sdl">Selected Item</div><div class="sdv" id="selDisplay">No item selected ‚Äî click a card above</div></div>
        <div class="input-row">
          <div class="fg"><label>Weight (kg)</label><input type="number" id="weightInp" placeholder="e.g. 2.5" min="0.1" step="0.1" oninput="calcAmt()"></div>
          <div class="fg"><label>Rate Applied</label><input type="text" id="rateInp" placeholder="‚Çπ ‚Äî" readonly></div>
        </div>
        <div class="payout-box">
          <div class="pb-label">üí∞ Your Estimated Payout</div>
          <div class="pb-amount" id="amtInp">‚Çπ 0.00</div>
          <div class="pb-note">Paid in cash or UPI on collection day ¬∑ Rates may vary by condition</div>
        </div>
        <button class="btn-primary" style="width:100%;padding:13px;font-size:.93rem" onclick="submitItems()">Submit Pickup Request ‚Üí</button>
        <div class="success-toast" id="itemsSuccess" style="margin-top:14px">‚úÖ Request submitted! Our team will contact you within 24 hours to confirm pickup and payout.</div>
      </div>
    </div>
  </div>
</div>

<!-- ===== PAGE 3: ADMIN LOGIN ===== -->
<div id="pg-login" class="page">
  <div style="min-height:100vh;background:#0f2212;display:flex;align-items:center;justify-content:center;padding:20px;position:relative;overflow:hidden">
    <div style="position:absolute;width:500px;height:500px;background:radial-gradient(circle,rgba(46,125,50,.22) 0%,transparent 65%);top:-120px;right:-80px;pointer-events:none"></div>
    <div style="position:absolute;width:380px;height:380px;background:radial-gradient(circle,rgba(76,175,80,.1) 0%,transparent 65%);bottom:-80px;left:-60px;pointer-events:none"></div>
    <div class="login-card">
      <div class="login-brand">
        <div class="logo-box">‚ôª</div>
        <h2>EcoReclaim</h2>
        <p>Admin Dashboard Access</p>
      </div>
      <div class="lf-group"><label>Username</label><input type="text" id="loginUser" placeholder="Enter username" autocomplete="username"></div>
      <div class="lf-group"><label>Password</label><input type="password" id="loginPass" placeholder="Enter password" autocomplete="current-password"></div>
      <button class="login-btn" onclick="doLogin()">Sign In to Dashboard</button>
      <div class="login-error" id="loginErr">Incorrect username or password.</div>
      <div class="login-demo">Demo ‚Äî Username: <span>admin</span> ¬∑ Password: <span>admin@2026</span></div>
      <div class="back-to-site" onclick="showPage('pg-home')">‚Üê Back to main site</div>
    </div>
  </div>
</div>

<!-- ===== PAGE 4: ADMIN DASHBOARD ===== -->
<div id="pg-admin" class="page">
  <aside class="sidebar">
    <div class="sb-logo"><div class="sb-icon">‚ôª</div><span>EcoReclaim</span></div>
    <nav class="sb-nav">
      <div class="sb-lbl">Menu</div>
      <div class="sb-link active" onclick="showPage('pg-admin')"><span class="si">üìä</span><span>Dashboard</span></div>
      <div class="sb-link" onclick="showPage('pg-routes')"><span class="si">üöõ</span><span>Collection Routes</span></div>
      <div class="sb-link" onclick="showPage('pg-items')"><span class="si">üí∞</span><span>Pricing Calculator</span></div>
      <div class="sb-link" onclick="showPage('pg-home')"><span class="si">üåê</span><span>Public Site</span></div>
    </nav>
    <div class="sb-footer"><button class="logout-btn" onclick="doLogout()"><span>üîì</span><span>Logout</span></button></div>
  </aside>
  <main class="admin-main">
    <div class="admin-topbar">
      <div><h1>Dashboard</h1><p id="adminDate">E-Waste Management Overview</p></div>
      <div style="display:flex;gap:10px;align-items:center">
        <button class="add-btn" onclick="openAddModal()">+ Add Request</button>
        <div class="admin-badge">Administrator</div>
      </div>
    </div>
    <div class="stat-grid">
      <div class="sc total"><div class="sc-icon">üì¶</div><div class="sc-lbl">Total Requests</div><div class="sc-num" id="sc-total">0</div></div>
      <div class="sc pending"><div class="sc-icon">‚è≥</div><div class="sc-lbl">Pending</div><div class="sc-num" id="sc-pending">0</div></div>
      <div class="sc collected"><div class="sc-icon">üöö</div><div class="sc-lbl">Collected</div><div class="sc-num" id="sc-collected">0</div></div>
      <div class="sc recycled"><div class="sc-icon">‚úÖ</div><div class="sc-lbl">Recycled</div><div class="sc-num" id="sc-recycled">0</div></div>
      <div class="sc payout"><div class="sc-icon">üí∞</div><div class="sc-lbl">Total Payouts</div><div class="sc-num" id="sc-payout">‚Çπ0</div></div>
    </div>
    <div class="tbl-section">
      <div class="tbl-head">
        <div><h2>All Pickup Requests</h2><p>Manage collections, routes and customer payouts</p></div>
      </div>
      <div class="tbl-wrap">
        <table>
          <thead>
            <tr><th>#</th><th>Customer</th><th>Category</th><th>Weight</th><th>Qty</th><th>Address</th><th>Payout Due</th><th>Status</th><th>Actions</th></tr>
          </thead>
          <tbody id="adminTable"></tbody>
        </table>
        <div id="emptyState" style="display:none;text-align:center;padding:40px;color:var(--muted);font-size:.86rem"><div style="font-size:2rem;margin-bottom:10px">üì≠</div><p>No pickup requests yet.</p></div>
      </div>
    </div>
  </main>
</div>

<!-- ===== PAGE 5: COLLECTION ROUTES ===== -->
<div id="pg-routes" class="page">
  <aside class="sidebar">
    <div class="sb-logo"><div class="sb-icon">‚ôª</div><span>EcoReclaim</span></div>
    <nav class="sb-nav">
      <div class="sb-lbl">Menu</div>
      <div class="sb-link" onclick="showPage('pg-admin')"><span class="si">üìä</span><span>Dashboard</span></div>
      <div class="sb-link active"><span class="si">üöõ</span><span>Collection Routes</span></div>
      <div class="sb-link" onclick="showPage('pg-items')"><span class="si">üí∞</span><span>Pricing Calculator</span></div>
      <div class="sb-link" onclick="showPage('pg-home')"><span class="si">üåê</span><span>Public Site</span></div>
    </nav>
    <div class="sb-footer"><button class="logout-btn" onclick="doLogout()"><span>üîì</span><span>Logout</span></button></div>
  </aside>
  <main class="routes-main">
    <div class="admin-topbar">
      <div><h1>üöõ Collection Routes</h1><p>Navigate to pickup locations ¬∑ Pay customers on collection</p></div>
      <div class="admin-badge">Administrator</div>
    </div>
    <div class="summary-bar">
      <div class="sum-item"><div class="sum-icon">üìç</div><div><div class="sum-lbl">Total Routes</div><div class="sum-val" id="rt-total">0</div></div></div>
      <div class="sum-item"><div class="sum-icon">‚è≥</div><div><div class="sum-lbl">Pending</div><div class="sum-val" id="rt-pending">0</div></div></div>
      <div class="sum-item"><div class="sum-icon">‚úÖ</div><div><div class="sum-lbl">Completed</div><div class="sum-val" id="rt-done">0</div></div></div>
      <div class="sum-item"><div class="sum-icon">üí∞</div><div><div class="sum-lbl">Cash to Carry</div><div class="sum-val green" id="rt-payout">‚Çπ0</div></div></div>
    </div>
    <div class="routes-grid" id="routesGrid"></div>
  </main>
</div>

<!-- ===== MODALS ===== -->
<!-- Add Request Modal -->
<div class="modal-overlay" id="addModal">
  <div class="modal">
    <button class="close-modal" onclick="closeAddModal()">‚úï</button>
    <h3>Add New Pickup Request</h3>
    <div class="m-grid">
      <div class="mfg"><label>Customer Name *</label><input type="text" id="nName" placeholder="Full name"></div>
      <div class="mfg"><label>Phone *</label><input type="tel" id="nPhone" placeholder="+91 98765 43210"></div>
      <div class="mfg"><label>Email</label><input type="email" id="nEmail" placeholder="customer@email.com"></div>
      <div class="mfg"><label>UPI / Bank Details</label><input type="text" id="nUPI" placeholder="upi@bank or account no."></div>
      <div class="mfg"><label>Category *</label>
        <select id="nCat" onchange="calcModalPayout()">
          <option value="">Select category</option>
          <option value="Mobile Phone">üì± Mobile Phone ‚Äî ‚Çπ200/kg</option>
          <option value="Laptop / PC">üíª Laptop / PC ‚Äî ‚Çπ150/kg</option>
          <option value="Battery">üîã Battery ‚Äî ‚Çπ80/kg</option>
          <option value="Television">üì∫ Television ‚Äî ‚Çπ60/kg</option>
          <option value="Printer / Scanner">üñ®Ô∏è Printer / Scanner ‚Äî ‚Çπ70/kg</option>
          <option value="Other">üîå Other ‚Äî ‚Çπ50/kg</option>
        </select>
      </div>
      <div class="mfg"><label>Quantity (items)</label><input type="number" id="nQty" min="1" value="1"></div>
    </div>
    <div class="mfg"><label>Weight (kg) *</label><input type="number" id="nWeight" placeholder="e.g. 3.5" min="0.1" step="0.1" oninput="calcModalPayout()"></div>
    <div class="mfg"><label>Pickup Address *</label><input type="text" id="nAddr" placeholder="Street, City, PIN Code"></div>
    <div class="modal-payout">
      <div class="mp-lbl">üí∞ Payout to Customer</div>
      <div class="mp-val" id="modalPayoutVal">‚Çπ 0</div>
      <div class="mp-sub" id="modalPayoutSub">Enter category and weight to calculate</div>
    </div>
    <div class="modal-actions">
      <button class="m-cancel" onclick="closeAddModal()">Cancel</button>
      <button class="m-save" onclick="saveRequest()">Save Request</button>
    </div>
  </div>
</div>

<!-- Payment Modal -->
<div class="modal-overlay" id="payModal">
  <div class="modal pay-modal">
    <button class="close-modal" onclick="closeModal('payModal')">‚úï</button>
    <div id="payContent">
      <div class="pay-header">
        <div class="pay-icon">üí≥</div>
        <h3>Process Payment</h3>
        <p id="paySubtitle" style="font-size:.83rem;color:var(--muted);margin-top:4px"></p>
      </div>
      <div class="pay-breakdown" id="payBreakdown"></div>
      <button class="pay-confirm-btn" onclick="confirmPayment()">‚úì Confirm Payment Sent</button>
    </div>
    <div class="pay-confirmed" id="payConfirmed">
      <div class="big-check">‚úÖ</div>
      <h4>Payment Confirmed!</h4>
      <p id="payConfirmMsg"></p>
    </div>
  </div>
</div>

<!-- Route Map Modal -->
<div class="modal-overlay" id="routeModal">
  <div class="modal" style="max-width:480px">
    <button class="close-modal" onclick="closeModal('routeModal')">‚úï</button>
    <h3>üó∫ Route & Payout Details</h3>
    <div id="routeDetailBody"></div>
  </div>
</div>

<!-- ===== JAVASCRIPT ===== -->
<script>
const RATES = { 'Mobile Phone':200, 'Laptop / PC':150, 'Battery':80, 'Television':60, 'Printer / Scanner':70, 'Other':50 };
const ADMIN_KEY = 'ecoreclaim_admin';

/* NAV */
function showPage(id) {
  if ((id==='pg-admin'||id==='pg-routes') && localStorage.getItem(ADMIN_KEY)!=='true') { showPage('pg-login'); return; }
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  window.scrollTo(0,0);
  if (id==='pg-admin') { renderTable(); document.getElementById('adminDate').textContent = new Date().toLocaleDateString('en-IN',{weekday:'long',year:'numeric',month:'long',day:'numeric'}); }
  if (id==='pg-routes') renderRoutes();
}
function sTo(id) { document.getElementById(id)?.scrollIntoView({behavior:'smooth'}); }
window.addEventListener('load', () => { const d=document.getElementById('pickupDate'); if(d) d.min=new Date().toISOString().split('T')[0]; });

/* PUBLIC FORM */
function calcPublicPayout() {
  const cat = document.getElementById('pCategory').value;
  const w   = parseFloat(document.getElementById('pWeight').value)||0;
  const rate= RATES[cat]||0;
  const tot = Math.round(rate*w);
  const box = document.getElementById('payoutEstimate');
  if (cat && w>0 && rate>0) {
    document.getElementById('publicPayoutAmt').textContent = '‚Çπ '+tot.toLocaleString('en-IN');
    document.getElementById('pe-formula').textContent = `${cat} @ ‚Çπ${rate}/kg √ó ${w}kg`;
    box.style.display = 'flex';
  } else { box.style.display = 'none'; }
}

function submitPickup(e) {
  e.preventDefault();
  const cat    = document.getElementById('pCategory').value;
  const weight = parseFloat(document.getElementById('pWeight').value)||1;
  const qty    = parseInt(document.getElementById('pQty').value)||1;
  const payout = Math.round((RATES[cat]||50)*weight);
  requests.push({ id:nextId++, name:document.getElementById('pName').value.trim(), email:document.getElementById('pEmail').value.trim(), phone:document.getElementById('pPhone').value.trim(), upi:document.getElementById('pUPI').value.trim(), category:cat, qty, weight, address:document.getElementById('pAddress').value.trim(), payout, status:'pending', paid:false });
  const t = document.getElementById('homeSuccess');
  t.style.display='block'; e.target.reset(); document.getElementById('payoutEstimate').style.display='none';
  setTimeout(()=>t.style.display='none', 6000);
}

/* ITEMS PAGE */
let selItem='', selPrice=0;
function selectItem(card, name, price) {
  document.querySelectorAll('.item-card').forEach(c=>c.classList.remove('selected'));
  card.classList.add('selected'); selItem=name; selPrice=price;
  document.getElementById('selDisplay').textContent=`${name} ‚Äî ‚Çπ${price}/kg`;
  document.getElementById('rateInp').value=`‚Çπ ${price} / kg`;
  calcAmt();
}
function calcAmt() {
  const w=parseFloat(document.getElementById('weightInp').value);
  document.getElementById('amtInp').textContent=(!isNaN(w)&&w>0&&selPrice>0)?`‚Çπ ${(w*selPrice).toFixed(2)}`:'‚Çπ 0.00';
}
function submitItems() {
  const w=document.getElementById('weightInp').value;
  if (!selItem){alert('Please select an item above.');return;}
  if (!w||parseFloat(w)<=0){alert('Please enter a valid weight.');return;}
  const m=document.getElementById('itemsSuccess'); m.style.display='block';
  document.querySelectorAll('.item-card').forEach(c=>c.classList.remove('selected'));
  selItem='';selPrice=0;document.getElementById('weightInp').value='';document.getElementById('rateInp').value='';document.getElementById('amtInp').textContent='‚Çπ 0.00';document.getElementById('selDisplay').textContent='No item selected ‚Äî click a card above';
  setTimeout(()=>m.style.display='none',5000);
}

/* AUTH */
function doLogin() {
  const u=document.getElementById('loginUser').value.trim(), p=document.getElementById('loginPass').value.trim(), err=document.getElementById('loginErr');
  err.style.display='none';
  if (!u||!p){err.textContent='Please enter both fields.';err.style.display='block';return;}
  if (u==='admin'&&p==='admin@2026'){localStorage.setItem(ADMIN_KEY,'true');document.getElementById('loginUser').value='';document.getElementById('loginPass').value='';showPage('pg-admin');}
  else{err.textContent='Incorrect username or password.';err.style.display='block';document.getElementById('loginPass').value='';}
}
document.addEventListener('keydown',e=>{if(e.key==='Enter'&&document.getElementById('pg-login').classList.contains('active'))doLogin();});
function doLogout(){if(confirm('Logout?')){localStorage.removeItem(ADMIN_KEY);showPage('pg-login');}}

/* DATA */
let requests = [
  {id:1,name:'Rahul Sharma', email:'rahul@email.com',  phone:'+91 98765 43210', upi:'rahul@okicici',   category:'Mobile Phone', qty:2, weight:1.5, address:'12, MG Road, Bengaluru, Karnataka 560001',       payout:300,status:'pending',  paid:false},
  {id:2,name:'Anita Desai',  email:'anita@email.com',  phone:'+91 87654 32109', upi:'anita@ybl',       category:'Laptop / PC',  qty:1, weight:2.0, address:'45, T Nagar, Chennai, Tamil Nadu 600017',         payout:300,status:'collected',paid:false},
  {id:3,name:'Vikram Nair',  email:'vikram@email.com', phone:'+91 76543 21098', upi:'9876543210@paytm',category:'Battery',      qty:3, weight:4.0, address:'78, Andheri East, Mumbai, Maharashtra 400069',    payout:320,status:'recycled', paid:true},
  {id:4,name:'Priya Menon',  email:'priya@email.com',  phone:'+91 65432 10987', upi:'priya@upi',       category:'Television',   qty:1, weight:8.0, address:'23, Koramangala, Bengaluru, Karnataka 560034',    payout:480,status:'pending',  paid:false},
];
let nextId=5;

function cap(s){return s.charAt(0).toUpperCase()+s.slice(1);}
function fmt(n){return '‚Çπ'+n.toLocaleString('en-IN');}

/* TABLE */
function renderTable() {
  const tbody=document.getElementById('adminTable'), empty=document.getElementById('emptyState');
  if (!requests.length){tbody.innerHTML='';empty.style.display='block';updateCounts();return;}
  empty.style.display='none';
  tbody.innerHTML=requests.map((r,i)=>`
    <tr>
      <td style="color:#bbb;font-size:.75rem">${String(i+1).padStart(2,'0')}</td>
      <td><div class="name-cell">${r.name}<small>${r.phone||r.email||'‚Äî'}</small></div></td>
      <td>${r.category}</td>
      <td style="text-align:center">${r.weight}kg</td>
      <td style="text-align:center">${r.qty}</td>
      <td style="font-size:.78rem;color:#555;max-width:130px;line-height:1.4">${r.address}</td>
      <td>
        <span class="payout-pill" style="${r.paid?'opacity:.5;text-decoration:line-through':''}">${fmt(r.payout)}</span>
        ${r.paid?'<br><span style="font-size:.68rem;color:var(--g-mid)">‚úì Paid</span>':''}
      </td>
      <td><span class="badge ${r.status}">${cap(r.status)}</span></td>
      <td>
        <div class="act-group">
          ${r.status==='pending'  ?`<button class="act-btn ab-collect" onclick="setStatus(${r.id},'collected')">Collect</button>`:''}
          ${r.status!=='recycled' ?`<button class="act-btn ab-recycle" onclick="setStatus(${r.id},'recycled')">Recycle</button>`:''}
          <button class="act-btn ab-route" onclick="openRouteModal(${r.id})">üó∫ Route</button>
          ${!r.paid?`<button class="act-btn ab-pay" onclick="openPayModal(${r.id})">üí≥ Pay</button>`:''}
          <button class="act-btn ab-delete" onclick="delRequest(${r.id})">‚úï</button>
        </div>
      </td>
    </tr>`).join('');
  updateCounts();
}
function updateCounts() {
  document.getElementById('sc-total').textContent    = requests.length;
  document.getElementById('sc-pending').textContent  = requests.filter(r=>r.status==='pending').length;
  document.getElementById('sc-collected').textContent= requests.filter(r=>r.status==='collected').length;
  document.getElementById('sc-recycled').textContent = requests.filter(r=>r.status==='recycled').length;
  document.getElementById('sc-payout').textContent   = fmt(requests.reduce((s,r)=>s+r.payout,0));
}
function setStatus(id,status){const r=requests.find(r=>r.id===id);if(r){r.status=status;renderTable();}}
function delRequest(id){if(confirm('Delete this request?')){requests=requests.filter(r=>r.id!==id);renderTable();}}

/* ADD MODAL */
function calcModalPayout() {
  const cat=document.getElementById('nCat').value, w=parseFloat(document.getElementById('nWeight').value)||0, rate=RATES[cat]||0, tot=Math.round(rate*w);
  document.getElementById('modalPayoutVal').textContent = cat&&w>0?fmt(tot):'‚Çπ 0';
  document.getElementById('modalPayoutSub').textContent = cat&&w>0?`${cat} @ ‚Çπ${rate}/kg √ó ${w}kg`:'Enter category and weight to calculate';
}
function openAddModal(){document.getElementById('addModal').classList.add('open');document.getElementById('nName').focus();}
function closeAddModal(){
  document.getElementById('addModal').classList.remove('open');
  ['nName','nPhone','nEmail','nUPI','nCat','nWeight','nAddr'].forEach(id=>{const e=document.getElementById(id);if(e)e.value='';});
  document.getElementById('nQty').value='1';
  document.getElementById('modalPayoutVal').textContent='‚Çπ 0';
  document.getElementById('modalPayoutSub').textContent='Enter category and weight to calculate';
}
function saveRequest() {
  const cat=document.getElementById('nCat').value, name=document.getElementById('nName').value.trim(), phone=document.getElementById('nPhone').value.trim(), email=document.getElementById('nEmail').value.trim(), upi=document.getElementById('nUPI').value.trim(), qty=parseInt(document.getElementById('nQty').value)||1, weight=parseFloat(document.getElementById('nWeight').value)||0, address=document.getElementById('nAddr').value.trim();
  if (!name||!cat||!address||weight<=0){alert('Please fill Name, Category, Weight and Address.');return;}
  const payout=Math.round((RATES[cat]||50)*weight);
  requests.push({id:nextId++,name,email,phone,upi,category:cat,qty,weight,address,payout,status:'pending',paid:false});
  closeAddModal(); renderTable();
}

/* ROUTE MODAL */
function openRouteModal(id) {
  const r=requests.find(r=>r.id===id); if(!r)return;
  const mapsUrl=`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(r.address)}&travelmode=driving`;
  document.getElementById('routeDetailBody').innerHTML=`
    <div style="display:flex;align-items:center;gap:12px;margin-bottom:16px">
      <div class="avatar" style="width:44px;height:44px">${r.name.split(' ').map(n=>n[0]).join('').slice(0,2).toUpperCase()}</div>
      <div><div style="font-family:'Syne',sans-serif;font-weight:700;font-size:1rem">${r.name}</div><div style="font-size:.8rem;color:var(--muted)">${r.phone||r.email||'‚Äî'}</div></div>
    </div>
    <div style="background:var(--cream);border-radius:10px;padding:14px;margin-bottom:14px;font-size:.85rem;line-height:2">
      <div><span style="font-size:.7rem;color:var(--muted);text-transform:uppercase;letter-spacing:.5px">üì¶ Item</span><br><strong>${r.category}</strong> √ó ${r.qty} unit${r.qty>1?'s':''} ¬∑ ${r.weight}kg</div>
      <div><span style="font-size:.7rem;color:var(--muted);text-transform:uppercase;letter-spacing:.5px">üìç Pickup Address</span><br>${r.address}</div>
      <div><span style="font-size:.7rem;color:var(--muted);text-transform:uppercase;letter-spacing:.5px">üí≥ UPI / Bank</span><br>${r.upi||'Not provided'}</div>
      <div><span style="font-size:.7rem;color:var(--muted);text-transform:uppercase;letter-spacing:.5px">üí∞ Amount to Pay Customer</span><br>
        <span style="font-family:'Syne',sans-serif;font-weight:800;font-size:1.4rem;color:var(--g-mid)">${fmt(r.payout)}</span>
        <span style="font-size:.75rem;color:var(--muted);margin-left:6px">(‚Çπ${RATES[r.category]||50}/kg √ó ${r.weight}kg)</span>
        ${r.paid?'<span style="background:#e8f5e9;color:var(--g-mid);border:1px solid var(--g-light);border-radius:100px;padding:1px 10px;font-size:.72rem;margin-left:6px">‚úì Paid</span>':''}
      </div>
    </div>
    <div style="background:#e8f5e9;border:1px solid var(--g-light);border-radius:10px;overflow:hidden;margin-bottom:14px;cursor:pointer" onclick="window.open('${mapsUrl}','_blank')">
      <div style="padding:10px 14px;display:flex;align-items:center;gap:10px;font-size:.83rem;color:var(--g-mid);font-weight:500;border-bottom:1px solid var(--g-light)">
        <span>üó∫</span> Google Maps Navigation <span style="margin-left:auto;font-size:.75rem;opacity:.6">Click to open ‚Üó</span>
      </div>
      <div style="background:var(--cream);height:160px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:7px">
        <div style="font-size:2.5rem">üìç</div>
        <div style="font-size:.82rem;font-weight:600;color:var(--g-mid)">Tap to start navigation</div>
        <div style="font-size:.73rem;color:var(--muted);text-align:center;padding:0 20px;line-height:1.4">${r.address}</div>
      </div>
    </div>
    <div style="display:flex;gap:9px">
      <button onclick="window.open('${mapsUrl}','_blank')" style="flex:1;padding:11px;background:var(--g-mid);color:#fff;border:none;border-radius:8px;font-family:'DM Sans',sans-serif;font-weight:500;cursor:pointer;font-size:.88rem">üöó Start Navigation</button>
      ${r.phone?`<button onclick="window.open('tel:${r.phone}')" style="flex:1;padding:11px;background:#e3f2fd;color:var(--blue);border:1px solid #90caf9;border-radius:8px;font-family:'DM Sans',sans-serif;font-weight:500;cursor:pointer;font-size:.88rem">üìû Call</button>`:''}
      ${!r.paid?`<button onclick="openPayModal(${r.id});closeModal('routeModal')" style="flex:1;padding:11px;background:#fff9c4;color:#f57f17;border:1px solid #ffe082;border-radius:8px;font-family:'DM Sans',sans-serif;font-weight:500;cursor:pointer;font-size:.88rem">üí≥ Pay</button>`:''}
    </div>`;
  document.getElementById('routeModal').classList.add('open');
}

/* PAY MODAL */
let currentPayId=null;
function openPayModal(id) {
  const r=requests.find(r=>r.id===id); if(!r)return;
  currentPayId=id;
  document.getElementById('payContent').style.display='block';
  document.getElementById('payConfirmed').style.display='none';
  document.getElementById('paySubtitle').textContent=`Payment for ${r.name}`;
  document.getElementById('payBreakdown').innerHTML=`
    <div class="pay-row"><span class="lbl">Customer</span><span class="val">${r.name}</span></div>
    <div class="pay-row"><span class="lbl">Phone</span><span class="val">${r.phone||'‚Äî'}</span></div>
    <div class="pay-row"><span class="lbl">UPI / Bank</span><span class="val">${r.upi||'‚Äî'}</span></div>
    <div class="pay-row"><span class="lbl">Item</span><span class="val">${r.category}</span></div>
    <div class="pay-row"><span class="lbl">Weight</span><span class="val">${r.weight} kg</span></div>
    <div class="pay-row"><span class="lbl">Rate</span><span class="val">‚Çπ${RATES[r.category]||50}/kg</span></div>
    <div class="pay-row total"><span class="lbl">üí∞ Pay to Customer</span><span class="val">${fmt(r.payout)}</span></div>`;
  document.getElementById('payModal').classList.add('open');
}
function confirmPayment() {
  const r=requests.find(r=>r.id===currentPayId);
  if(r){r.paid=true;document.getElementById('payContent').style.display='none';document.getElementById('payConfirmed').style.display='block';document.getElementById('payConfirmMsg').textContent=`${fmt(r.payout)} marked as paid to ${r.name}.`;renderTable();setTimeout(()=>closeModal('payModal'),2500);}
}

/* ROUTES PAGE */
function renderRoutes() {
  const grid=document.getElementById('routesGrid'); if(!grid)return;
  const active=requests.filter(r=>r.status!=='recycled');
  const unpaid=active.filter(r=>!r.paid);
  document.getElementById('rt-total').textContent   = requests.length;
  document.getElementById('rt-pending').textContent = requests.filter(r=>r.status==='pending').length;
  document.getElementById('rt-done').textContent    = requests.filter(r=>r.status==='recycled').length;
  document.getElementById('rt-payout').textContent  = fmt(unpaid.reduce((s,r)=>s+r.payout,0));

  if (!active.length){grid.innerHTML='<div style="background:white;border-radius:14px;padding:40px;text-align:center;color:var(--muted);font-size:.9rem;grid-column:1/-1"><div style="font-size:2rem;margin-bottom:10px">üéâ</div>All pickups completed and paid!</div>';return;}

  grid.innerHTML=active.map(r=>{
    const ini=r.name.split(' ').map(n=>n[0]).join('').toUpperCase().slice(0,2);
    const dot=r.status==='collected'?'collected':'';
    const mapsUrl=`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(r.address)}&travelmode=driving`;
    const mapsStaticAddr=encodeURIComponent(r.address);
    return `<div class="route-card">
      <div class="rc-head">
        <div class="rc-title">
          <div class="avatar">${ini}</div>
          <div><h3>${r.name}</h3><p>${r.category} ¬∑ ${r.weight}kg ¬∑ ${r.qty} unit${r.qty>1?'s':''}</p></div>
        </div>
        <div class="status-dot ${dot}"></div>
      </div>
      <div class="rc-body">
        <div class="detail-row"><span class="di">üìç</span><div><span class="dl">Pickup Address</span><span>${r.address}</span></div></div>
        <div class="detail-row"><span class="di">üìû</span><div><span class="dl">Phone</span><span>${r.phone||'‚Äî'}</span></div></div>
        <div class="detail-row"><span class="di">üí≥</span><div><span class="dl">UPI / Bank</span><span>${r.upi||'Not provided'}</span></div></div>
      </div>
      <div class="rc-payout-box">
        <div><div class="rpb-label">üí∞ Amount to Pay Customer</div><div class="rpb-sub">‚Çπ${RATES[r.category]||50}/kg √ó ${r.weight}kg</div></div>
        <div>
          <div class="rpb-amount" style="${r.paid?'opacity:.5;text-decoration:line-through':''}">${fmt(r.payout)}</div>
          ${r.paid?'<div style="font-size:.7rem;color:var(--g-mid);text-align:right;margin-top:2px">‚úì Paid</div>':''}
        </div>
      </div>
      <div class="map-placeholder" onclick="window.open('${mapsUrl}','_blank')">
        <div class="mp-icon">üó∫</div>
        <div class="mp-text">Tap to Open Navigation Route</div>
        <div class="mp-addr">${r.address}</div>
      </div>
      <div class="rc-foot">
        <button class="rc-btn rcb-maps" onclick="window.open('${mapsUrl}','_blank')">üöó Navigate</button>
        ${!r.paid?`<button class="rc-btn rcb-pay" onclick="openPayModal(${r.id})">üí≥ Pay ${fmt(r.payout)}</button>`:`<button class="rc-btn" style="background:#e8f5e9;color:var(--g-mid);border:1px solid var(--g-light)" disabled>‚úì Paid</button>`}
        <button class="rc-btn rcb-done" onclick="markDone(${r.id})">‚úì Done</button>
      </div>
    </div>`;
  }).join('');
}
function markDone(id){setStatus(id,'recycled');renderRoutes();}

function closeModal(id){document.getElementById(id).classList.remove('open');}
document.querySelectorAll('.modal-overlay').forEach(o=>o.addEventListener('click',e=>{if(e.target===o)o.classList.remove('open');}));
</script>
</body>
</html>
